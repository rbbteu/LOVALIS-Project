<svg width="1000" height="700" viewBox="0 0 1000 700" fill="none" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#00D2FF" />
        </marker>
        <filter id="textGlow" x="-20%" y="-20%" width="140%" height="140%">
            <feGaussianBlur stdDeviation="1" result="blur"/>
            <feComposite in="SourceGraphic" in2="blur" operator="over"/>
        </filter>
    </defs>

    <rect width="1000" height="700" fill="#0F1720"/> 
    
    <path d="M0 0 L1000 700 M1000 0 L0 700" stroke="#1F2F3F" stroke-width="1" opacity="0.3"/>
    <pattern id="smallGrid" width="20" height="20" patternUnits="userSpaceOnUse">
        <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#1F2F3F" stroke-width="0.5"/>
    </pattern>
    <rect width="1000" height="700" fill="url(#smallGrid)" />

    <rect x="20" y="20" width="250" height="80" fill="#1F2F3F" stroke="#00D2FF" stroke-width="1"/>
    <text x="35" y="45" font-family="Consolas" font-size="12" fill="#00D2FF">SYS: LOGICA KERNEL v4.0.1</text>
    <text x="35" y="65" font-family="Consolas" font-size="12" fill="#00D2FF">MOD: ZVF_MAIN_LOOP</text>
    <text x="35" y="85" font-family="Consolas" font-size="12" fill="#00D2FF">STATUS: ACTIVE / LISTENING</text>

    <line x1="50" y1="350" x2="950" y2="350" stroke="#2C3E50" stroke-width="4"/>
    
    <g transform="translate(80, 350)">
        <circle r="30" fill="#1F2F3F" stroke="#FFFFFF" stroke-width="2"/>
        <text x="0" y="5" text-anchor="middle" font-family="Consolas" font-size="12" fill="white">IN</text>
        <text x="-40" y="-50" font-family="Consolas" font-size="14" fill="#AAAAAA">O_vec = [E, M, T]</text>
        <line x1="0" y1="-35" x2="0" y2="-20" stroke="#AAAAAA" stroke-width="1" stroke-dasharray="2 2"/>
    </g>

    <line x1="110" y1="350" x2="220" y2="350" stroke="#00D2FF" stroke-width="2" marker-end="url(#arrow)"/>

    <g transform="translate(250, 350)">
        <polygon points="-40,-40 40,-40 60,0 40,40 -40,40 -60,0" fill="#1F2F3F" stroke="#00D2FF" stroke-width="2"/>
        <text x="0" y="5" text-anchor="middle" font-family="Arial" font-size="20" font-weight="bold" fill="#00D2FF">T</text>
        
        <text x="-20" y="-60" font-family="'Times New Roman', serif" font-size="16" fill="#00D2FF" font-style="italic">
            &#916;S &lt; &#916;S_env
        </text>
        <text x="-20" y="70" font-family="Consolas" font-size="10" fill="#00D2FF">CHECK: ENTROPY_MIN</text>
        
        <line x1="0" y1="40" x2="0" y2="150" stroke="#E74C3C" stroke-width="1" stroke-dasharray="4 2"/>
    </g>

    <line x1="310" y1="350" x2="420" y2="350" stroke="#00D2FF" stroke-width="2" marker-end="url(#arrow)"/>

    <g transform="translate(450, 350)">
        <polygon points="-40,-40 40,-40 60,0 40,40 -40,40 -60,0" fill="#1F2F3F" stroke="#2ECC71" stroke-width="2"/>
        <text x="0" y="5" text-anchor="middle" font-family="Arial" font-size="20" font-weight="bold" fill="#2ECC71">Ö</text>
        
        <text x="-30" y="-60" font-family="'Times New Roman', serif" font-size="16" fill="#2ECC71">
            &#8747; (t -&gt; t+175)
        </text>
        <text x="-20" y="70" font-family="Consolas" font-size="10" fill="#2ECC71">CHECK: REGEN_RATE</text>

        <line x1="0" y1="40" x2="0" y2="150" stroke="#E74C3C" stroke-width="1" stroke-dasharray="4 2"/>
    </g>

    <line x1="510" y1="350" x2="620" y2="350" stroke="#00D2FF" stroke-width="2" marker-end="url(#arrow)"/>

    <g transform="translate(650, 350)">
        <polygon points="-40,-40 40,-40 60,0 40,40 -40,40 -60,0" fill="#1F2F3F" stroke="#F2C94C" stroke-width="2"/>
        <text x="0" y="5" text-anchor="middle" font-family="Arial" font-size="20" font-weight="bold" fill="#F2C94C">E</text>
        
        <text x="-40" y="-60" font-family="'Times New Roman', serif" font-size="16" fill="#F2C94C">
            &#8721; (L_bio * c_i) &#8804; 0
        </text>
        <text x="-20" y="70" font-family="Consolas" font-size="10" fill="#F2C94C">CHECK: SUFFERING_IDX</text>

        <line x1="0" y1="40" x2="0" y2="150" stroke="#E74C3C" stroke-width="1" stroke-dasharray="4 2"/>
    </g>

    <rect x="200" y="500" width="500" height="60" rx="5" fill="#1F2F3F" stroke="#E74C3C" stroke-width="2"/>
    <text x="450" y="525" text-anchor="middle" font-family="Consolas" font-size="14" fill="#E74C3C" font-weight="bold">EXCEPTION HANDLER (BLOCK)</text>
    <text x="450" y="545" text-anchor="middle" font-family="Consolas" font-size="10" fill="#E74C3C">IF (FALSE) -> RETURN NULL &amp; LOG AUDIT</text>
    
    <circle cx="250" cy="500" r="3" fill="#E74C3C"/>
    <circle cx="450" cy="500" r="3" fill="#E74C3C"/>
    <circle cx="650" cy="500" r="3" fill="#E74C3C"/>

    <line x1="710" y1="350" x2="820" y2="350" stroke="#00F260" stroke-width="4" marker-end="url(#arrow)"/>
    
    <g transform="translate(870, 350)">
        <rect x="-50" y="-30" width="100" height="60" rx="5" fill="#00F260" fill-opacity="0.1" stroke="#00F260" stroke-width="2"/>
        <text x="0" y="-5" text-anchor="middle" font-family="Consolas" font-size="16" font-weight="bold" fill="#00F260" filter="url(#textGlow)">P_gen</text>
        <text x="0" y="15" text-anchor="middle" font-family="Consolas" font-size="10" fill="#00F260">VALID STATE</text>
    </g>

    <line x1="50" y1="620" x2="950" y2="620" stroke="#2C3E50"/>
    <text x="50" y="650" font-family="Consolas" font-size="12" fill="#7F8C8D">FORMAL LOGIC:</text>
    <text x="160" y="650" font-family="Consolas" font-size="12" fill="#00D2FF">f(x) = (T(x) &#8743; Ö(x) &#8743; E(x)) ? P_gen : &#8709;</text>

</svg>
